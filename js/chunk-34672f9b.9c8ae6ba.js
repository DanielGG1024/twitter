(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34672f9b"],{"062b":function(t,e,s){},"0931":function(t,e,s){"use strict";s("b718")},"09bf":function(t,e,s){},"3fe9":function(t,e,s){"use strict";s("062b")},"74c6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAcCAYAAAAEN20fAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB5SURBVHgB7dfBCYAwEETR0Qoswc6SzreEpAPNQg5R4kGFnct8GMnNBwoi8L7UVtqsnyn5jY9hBYTuCJ8huBnClxGYEEIIIcRXRNTMDUs/7OBW13bZwK/6JYP7aAqGd/EJk0AoQxhhhBEmHkP5r5lhDMRyB1y+EX87AdxCwzt7prpuAAAAAElFTkSuQmCC"},8419:function(t,e,s){"use strict";s("09bf")},9718:function(t,e,s){},b0c6:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{staticClass:"main-container"},[s("Menu"),s("main",{staticClass:"content scrollbar"},[s("div",{staticClass:"content-wrapper"},[t.isLoading?s("Spinner"):[s("ReplyDetail",{attrs:{"initial-tweet":t.tweet},on:{"after-tweetReply-post":t.afterTweetReplyPost}}),s("div",{staticClass:"reply-wrapper"},t._l(t.tweetReplies,(function(e){return s("ReplyTweets",{key:e.id,attrs:{tweetReplies:e,tweetUserAccount:t.tweet.user.account}})})),1)]],2)]),s("Popular")],1)])},r=[],i=s("1da1"),n=(s("96cf"),s("a4d3"),s("e01a"),s("b0c0"),s("fb62")),c=s("3b8f"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reply-detial"},[a("div",{staticClass:"content-header"},[a("div",{staticClass:"prev"},[a("router-link",{attrs:{to:"/main"}},[a("img",{staticClass:"prev-icon",attrs:{src:s("74c6"),alt:""}})])],1),t._m(0)]),a("div",{staticClass:"reply-tweet"},[a("div",{staticClass:"reply-tweet-user"},[a("router-link",{attrs:{to:{name:"user",params:{id:t.tweet.UserId}}}},[a("div",{staticClass:"user-icon-wrapper"},[a("img",{staticClass:"user-icon",attrs:{src:t.tweet.user.avatar,alt:""}})])]),a("div",{staticClass:"user-info"},[a("div",{staticClass:"user-name"},[t._v(t._s(t.tweet.user.name))]),a("div",{staticClass:"user-account"},[t._v("@"+t._s(t.tweet.user.account))])])],1),a("p",{staticClass:"user-txt"},[t._v(" "+t._s(t.tweet.description)+" ")]),a("div",{staticClass:"user-creat-time"},[a("span",[t._v(" "+t._s(t._f("fromNowWithWord")(t.tweet.createdAt))+" ． "+t._s(t._f("fromYear")(t.tweet.createdAt))+" ")])]),a("div",{staticClass:"reply-amount"},[a("span",{},[t._v(" "+t._s(t.tweet.replyCounts)+" ")]),a("span",{staticClass:"reply-amount-mark"},[t._v("回覆")]),a("span",{staticClass:"reply-total"},[t._v(" "+t._s(t.tweet.likeCounts)+" ")]),a("span",{staticClass:"reply-amount-mark"},[t._v("喜歡")])]),a("div",{staticClass:"icon-area"},[a("div",{staticClass:"icon-wrpper icon-chat",on:{click:t.clickChat}},[a("img",{staticClass:"icon",attrs:{src:s("b74f"),alt:""}})]),t.tweet.isLiked?a("button",{staticClass:"icon-wrpper",attrs:{disabled:t.isProcessing},on:{click:function(e){return t.removeLike(t.tweet.id)}}},[a("img",{staticClass:"icon",attrs:{src:s("4167"),alt:""}})]):a("button",{staticClass:"icon-wrpper",attrs:{disabled:t.isProcessing},on:{click:function(e){return t.addLike(t.tweet.id)}}},[a("img",{staticClass:"icon",attrs:{src:s("b4af"),alt:""}})])])]),a("ReplyDetailModal",{attrs:{tweet:t.tweet,ReplyDetailModalSwitch:t.ReplyDetailModal},on:{"after-click-close":t.afterClickClose,"after-click-background":t.afterClickClose,"after-tweetReply-post":t.afterTweetReplyPost}})],1)},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",{staticClass:"title"},[t._v("推文")])])}],u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.ReplyDetailModalSwitch,expression:"ReplyDetailModalSwitch"}],staticClass:"modal-background",on:{click:t.clickModalBackground}},[a("div",{staticClass:"modal"},[a("div",{staticClass:"modal-header"},[a("div",{staticClass:"close-icon",on:{click:t.clickClose}},[a("img",{staticClass:"close",attrs:{src:s("98f5"),alt:""}})])]),a("div",{staticClass:"reply"},[a("div",{staticClass:"reply-icon-wrapper"},[a("img",{staticClass:"user-icon",attrs:{src:t.tweet.user.avatar,alt:""}})]),a("div",{staticClass:"txt-wrapper"},[a("div",{staticClass:"txt-info"},[a("span",{staticClass:"user-name"},[t._v(t._s(t.tweet.user.name))]),a("span",{staticClass:"user-account"},[t._v("＠"+t._s(t.tweet.user.account)+" "),a("span",[t._v("．"+t._s(t.tweet.createdAt))])])]),a("div",{staticClass:"txt"},[a("p",[t._v(" "+t._s(t.tweet.description)+" ")])]),a("div",{staticClass:"txt-footer"},[a("span",{staticClass:"txt-footer-reply"},[t._v("回覆給")]),a("span",{staticClass:"footer-account"},[t._v("＠"+t._s(t.tweet.user.account))])])])]),a("div",{staticClass:"modal-txt"},[a("div",{staticClass:"modal-content-post"},[a("div",{staticClass:"modal-main-tweet"},[a("div",{staticClass:"user-icon-wrapper"},[a("img",{staticClass:"user-icon",attrs:{src:t.currentUser.avatar,alt:""}})]),a("div",{staticClass:"modal-main-tweet-txt"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.teweetContent,expression:"teweetContent"}],staticClass:"modal-textarea",attrs:{placeholder:"有甚麼新鮮事?"},domProps:{value:t.teweetContent},on:{input:function(e){e.target.composing||(t.teweetContent=e.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:t.contentError,expression:"contentError"}],staticClass:"modal-info"},[t._v(t._s(t.errorContentMessage))])]),a("button",{staticClass:"modal-main-tweet-button",attrs:{disabled:t.isProcessing},on:{click:function(e){return t.handleSubmit(t.tweet.id)}}},[t._v(" "+t._s(t.submitMessage)+" ")])])])])])])])},p=[],d=s("5530"),w=(s("498a"),s("7482")),v=s("2fa3"),f=s("2f62"),m={name:"ReplyDetailModal",props:{ReplyDetailModalSwitch:{type:Boolean,required:!0},tweet:{type:Object}},data:function(){return{teweetContent:"",contentError:!1,errorContentMessage:"",avatar:"",submitMessage:"推文",isProcessing:!1}},computed:Object(d["a"])({},Object(f["b"])(["currentUser","isAuthenticated"])),methods:{clickClose:function(){this.$emit("after-click-close")},clickModalBackground:function(t){var e=t.target;"modal-background"===e.className&&this.$emit("after-click-background")},handleSubmit:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,r,i,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.teweetContent,0!==a.trim().length){s.next=7;break}return e.contentError=!0,e.errorContentMessage="內容不可以空白",s.abrupt("return");case 7:if(!(a.length>140)){s.next=11;break}return e.contentError=!0,e.errorContentMessage="字數不可超過140字",s.abrupt("return");case 11:e.contentError=!1,e.errorContentMessage="";case 13:return s.prev=13,e.isProcessing=!0,e.submitMessage="請稍後..",r='{\n          "comment":"'.concat(a,'"\n        }'),i=JSON.parse(r),s.next=20,w["a"].postTweetReply({tweetId:t,data_JSON:i});case 20:if(n=s.sent,"success"===n.data.status){s.next=23;break}throw new Error;case 23:e.$emit("after-tweetReply-post"),e.teweetContent="",v["a"].fire({icon:"success",title:"發送成功!"}),e.isProcessing=!1,e.submitMessage="推文",s.next=35;break;case 30:s.prev=30,s.t0=s["catch"](13),v["a"].fire({icon:"error",title:"無法回復,請稍後"}),e.isProcessing=!1,e.submitMessage="推文";case 35:case"end":return s.stop()}}),s,null,[[13,30]])})))()}}},C=m,h=(s("8419"),s("2877")),b=Object(h["a"])(C,u,p,!1,null,"5f13e327",null),g=b.exports,y=s("2708"),k={name:"ReplyDetail",mixins:[y["b"]],components:{ReplyDetailModal:g},props:{initialTweet:{type:Object,required:!0}},data:function(){return{ReplyDetailModal:!1,isProcessing:!1,tweet:{user:{name:"",account:"",avatar:""},createdAt:"",replyCounts:0,likeCounts:0,isLiked:!1,id:-1,UserId:-1}}},created:function(){this.fetchTweet()},methods:{clickChat:function(){this.ReplyDetailModal=!0},afterClickClose:function(){this.ReplyDetailModal=!1},fetchTweet:function(){this.tweet=this.initialTweet},afterTweetReplyPost:function(){this.ReplyDetailModal=!1,this.$emit("after-tweetReply-post")},addLike:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,w["a"].addLike({tweetId:t});case 4:if(a=s.sent,r=a.data,"success"===r.status){s.next=8;break}throw new Error(r.message);case 8:e.tweet.likeCounts=e.tweet.likeCounts+1,e.tweet.isLiked=!0,e.isProcessing=!1,s.next=17;break;case 13:s.prev=13,s.t0=s["catch"](0),v["a"].fire({icon:"error",title:"無法喜歡,請稍後在試"}),e.isProcessing=!1;case 17:case"end":return s.stop()}}),s,null,[[0,13]])})))()},removeLike:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,w["a"].removeLike({tweetId:t});case 4:if(a=s.sent,r=a.data,"success"===r.status){s.next=8;break}throw new Error(r.message);case 8:e.tweet.likeCounts=e.tweet.likeCounts-1,e.tweet.isLiked=!1,e.isProcessing=!1,s.next=17;break;case 13:s.prev=13,s.t0=s["catch"](0),v["a"].fire({icon:"error",title:"無法取消喜歡,請稍後在試"}),e.isProcessing=!1;case 17:case"end":return s.stop()}}),s,null,[[0,13]])})))()}}},R=k,A=(s("b977"),Object(h["a"])(R,o,l,!1,null,"781b6a0e",null)),_=A.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reply-tweets"},[s("router-link",{attrs:{to:{name:"user",params:{id:t.tweetReply.UserId}}}},[s("div",{staticClass:"user-icon-wrapper"},[s("img",{staticClass:"user-icon",attrs:{src:t.tweetReply.User.avatar,alt:""}})])]),s("div",{staticClass:"reply-wrapper"},[s("div",{staticClass:"reply-user"},[s("span",{staticClass:"user-title"},[t._v(t._s(t.tweetReply.User.name))]),s("span",{staticClass:"user-account"},[t._v("＠"+t._s(t.tweetReply.User.account)+"．")]),s("span",{staticClass:"time"},[t._v(" "+t._s(t._f("fromNow")(t.tweetReply.createdAt))+" ")])]),s("div",{staticClass:"reply-account"},[s("span",{staticClass:"reply-account-mark"},[t._v("回覆")]),s("span",{staticClass:"reply-account-name"},[t._v("＠"+t._s(t.tweetUserAccount))])]),s("div",{staticClass:"reply-txt"},[t._v(" "+t._s(t.tweetReply.comment)+" ")])])],1)},M=[],E={name:"ReplyTweets",mixins:[y["b"]],props:{tweetReplies:{type:Object,required:!0},tweetUserAccount:{type:String,required:!0}},data:function(){return{tweetReply:this.tweetReplies}}},P=E,U=(s("0931"),Object(h["a"])(P,x,M,!1,null,"410ba686",null)),S=U.exports,T=s("2375"),D={components:{Menu:n["a"],Popular:c["a"],ReplyDetail:_,ReplyTweets:S,Spinner:T["a"]},data:function(){return{tweet:{user:{name:"",account:"",avatar:""},description:"",createdAt:"",replyCounts:0,likeCounts:0,isLiked:!1,id:-1,UserId:-1},isLoading:!0,tweetReplies:""}},beforeRouteUpdate:function(t,e,s){var a=t.params.id;this.fetchReply(a),s()},created:function(){this.fetchReplyDetail(),this.fetchTweetReplies()},methods:{afterTweetReplyPost:function(){this.fetchReplyDetail(),this.fetchTweetReplies()},fetchReplyDetail:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a,r,i,n,c,o,l,u,p,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.$route.params.id,e.prev=1,e.next=4,w["a"].getTweet({tweetId:s});case 4:a=e.sent,r=a.data,i=r.description,n=r.createdAt,c=r.replyCounts,o=r.likeCounts,l=r.isLiked,u=r.id,p=r.User,d=r.UserId,t.tweet.user.name=p.name,t.tweet.user.account=p.account,t.tweet.user.avatar=p.avatar,t.tweet.description=i,t.tweet.createdAt=n,t.tweet.replyCounts=c,t.tweet.likeCounts=o,t.tweet.isLiked=l,t.tweet.id=u,t.tweet.UserId=d,e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](1),v["a"].fire({icon:"warning",title:"無法取得資料"});case 22:case"end":return e.stop()}}),e,null,[[1,19]])})))()},fetchTweetReplies:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.$route.params.id,e.prev=1,e.next=4,w["a"].getTweetReplies({tweetId:s});case 4:a=e.sent,r=a.data,t.tweetReplies=r,t.isLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),t.isLoading=!1,v["a"].fire({icon:"error",title:"無法取得回覆,請稍後在試"});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()}}},O=D,L=(s("3fe9"),Object(h["a"])(O,a,r,!1,null,"0103802d",null));e["default"]=L.exports},b718:function(t,e,s){},b977:function(t,e,s){"use strict";s("9718")},e01a:function(t,e,s){"use strict";var a=s("23e7"),r=s("83ab"),i=s("da84"),n=s("5135"),c=s("861d"),o=s("9bf2").f,l=s("e893"),u=i.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var p={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new u(t):void 0===t?u():u(t);return""===t&&(p[e]=!0),e};l(d,u);var w=d.prototype=u.prototype;w.constructor=d;var v=w.toString,f="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;o(w,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=v.call(t);if(n(p,t))return"";var s=f?e.slice(7,-1):e.replace(m,"$1");return""===s?void 0:s}}),a({global:!0,forced:!0},{Symbol:d})}}}]);
//# sourceMappingURL=chunk-34672f9b.9c8ae6ba.js.map