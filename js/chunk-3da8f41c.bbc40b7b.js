(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3da8f41c"],{"0931":function(t,e,a){"use strict";a("b718")},"1bd4":function(t,e,a){"use strict";a("bcf9")},"2b9f":function(t,e,a){"use strict";a("cc7e")},"3a34":function(t,e,a){},"74c6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAcCAYAAAAEN20fAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB5SURBVHgB7dfBCYAwEETR0Qoswc6SzreEpAPNQg5R4kGFnct8GMnNBwoi8L7UVtqsnyn5jY9hBYTuCJ8huBnClxGYEEIIIcRXRNTMDUs/7OBW13bZwK/6JYP7aAqGd/EJk0AoQxhhhBEmHkP5r5lhDMRyB1y+EX87AdxCwzt7prpuAAAAAElFTkSuQmCC"},"84d4":function(t,e,a){"use strict";a("3a34")},b0c6:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"main-container"},[a("Menu"),a("main",{staticClass:"content"},[a("div",{staticClass:"content-wrapper"},[t.isLoading?a("Spinner"):[a("ReplyDetail",{attrs:{"initial-tweet":t.tweet},on:{"after-tweetReply-post":t.afterTweetReplyPost}}),a("div",{staticClass:"reply-wrapper"},t._l(t.tweetReplies,(function(e){return a("ReplyTweets",{key:e.UserId,attrs:{tweetReplies:e,tweetUserAccount:t.tweet.user.account}})})),1)]],2)]),a("Popular")],1)])},r=[],i=a("1da1"),n=(a("96cf"),a("a4d3"),a("e01a"),a("b0c0"),a("fb62")),c=a("3b8f"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reply-detial"},[s("div",{staticClass:"content-header"},[s("div",{staticClass:"prev"},[s("router-link",{attrs:{to:"/main"}},[s("img",{staticClass:"prev-icon",attrs:{src:a("74c6"),alt:""}})])],1),t._m(0)]),s("div",{staticClass:"reply-tweet"},[s("div",{staticClass:"reply-tweet-user"},[s("div",{staticClass:"user-icon-wrapper"},[s("img",{staticClass:"user-icon",attrs:{src:t.tweet.user.avatar,alt:""}})]),s("div",{staticClass:"user-info"},[s("div",{staticClass:"user-name"},[t._v(t._s(t.tweet.user.name))]),s("div",{staticClass:"user-account"},[t._v("@"+t._s(t.tweet.user.account))])])]),s("p",{staticClass:"user-txt"},[t._v(" "+t._s(t.tweet.description)+" ")]),s("div",{staticClass:"user-creat-time"},[s("span",[t._v(" "+t._s(t._f("fromNowWithWord")(t.tweet.createdAt))+" ． "+t._s(t._f("fromYear")(t.tweet.createdAt))+" ")])]),s("div",{staticClass:"reply-amount"},[s("span",{},[t._v(" "+t._s(t.tweet.replyCounts)+" ")]),s("span",{staticClass:"reply-amount-mark"},[t._v("回復")]),s("span",{staticClass:"reply-total"},[t._v(" "+t._s(t.tweet.likeCounts)+" ")]),s("span",{staticClass:"reply-amount-mark"},[t._v("喜歡")])]),s("div",{staticClass:"icon-area"},[s("div",{staticClass:"icon-wrpper",on:{click:t.clickChat}},[s("img",{staticClass:"icon",attrs:{src:a("b74f"),alt:""}})]),t.tweet.isLiked?s("div",{staticClass:"icon-wrpper",on:{click:function(e){return t.removeLike(t.tweet.id)}}},[s("img",{staticClass:"icon",attrs:{src:a("4167"),alt:""}})]):s("div",{staticClass:"icon-wrpper",on:{click:function(e){return t.addLike(t.tweet.id)}}},[s("img",{staticClass:"icon",attrs:{src:a("b4af"),alt:""}})])])]),s("ReplyDetailModal",{attrs:{tweet:t.tweet,ReplyDetailModalSwitch:t.ReplyDetailModal},on:{"after-click-close":t.afterClickClose,"after-click-background":t.afterClickClose,"after-tweetReply-post":t.afterTweetReplyPost}})],1)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"title"},[t._v("推文")])])}],u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.ReplyDetailModalSwitch,expression:"ReplyDetailModalSwitch"}],staticClass:"modal-background",on:{click:t.clickModalBackground}},[s("div",{staticClass:"modal"},[s("div",{staticClass:"modal-header"},[s("div",{staticClass:"close-icon",on:{click:t.clickClose}},[s("img",{staticClass:"close",attrs:{src:a("98f5"),alt:""}})])]),s("div",{staticClass:"reply"},[s("div",{staticClass:"reply-icon-wrapper"},[s("img",{staticClass:"user-icon",attrs:{src:t.tweet.user.avatar,alt:""}})]),s("div",{staticClass:"txt-wrapper"},[s("div",{staticClass:"txt-info"},[s("span",{staticClass:"user-name"},[t._v(t._s(t.tweet.user.name))]),s("span",{staticClass:"user-account"},[t._v("＠"+t._s(t.tweet.user.account)+" "),s("span",[t._v("．"+t._s(t.tweet.createdAt))])])]),s("div",{staticClass:"txt"},[s("p",[t._v(" "+t._s(t.tweet.description)+" ")])]),s("div",{staticClass:"txt-footer"},[s("span",{staticClass:"txt-footer-reply"},[t._v("回覆給")]),s("span",{staticClass:"footer-account"},[t._v("＠"+t._s(t.tweet.user.account))])])])]),s("div",{staticClass:"modal-txt"},[s("div",{staticClass:"modal-content-post"},[s("div",{staticClass:"modal-main-tweet"},[s("div",{staticClass:"user-icon-wrapper"},[s("img",{staticClass:"user-icon",attrs:{src:t.currentUser.avatar,alt:""}})]),s("div",{staticClass:"modal-main-tweet-txt"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.teweetContent,expression:"teweetContent"}],staticClass:"modal-textarea",attrs:{placeholder:"有甚麼新鮮事?"},domProps:{value:t.teweetContent},on:{input:function(e){e.target.composing||(t.teweetContent=e.target.value)}}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.contentError,expression:"contentError"}],staticClass:"modal-info"},[t._v(t._s(t.errorContentMessage))])]),s("button",{staticClass:"modal-main-tweet-button",on:{click:function(e){return t.handleSubmit(t.tweet.id)}}},[t._v(" 推文 ")])])])])])])])},p=[],d=a("5530"),w=(a("498a"),a("7482")),v=a("2fa3"),f=a("2f62"),m={name:"ReplyDetailModal",props:{ReplyDetailModalSwitch:{type:Boolean,required:!0},tweet:{type:Object}},data:function(){return{teweetContent:"",contentError:!1,errorContentMessage:"",avatar:""}},computed:Object(d["a"])({},Object(f["b"])(["currentUser","isAuthenticated"])),methods:{clickClose:function(){this.$emit("after-click-close")},clickModalBackground:function(t){var e=t.target;"modal-background"===e.className&&this.$emit("after-click-background")},handleSubmit:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r,i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e.teweetContent,0!==s.trim().length){a.next=7;break}return e.contentError=!0,e.errorContentMessage="內容不可以空白",a.abrupt("return");case 7:if(!(s.length>140)){a.next=11;break}return e.contentError=!0,e.errorContentMessage="字數不可超過140字",a.abrupt("return");case 11:e.contentError=!1,e.errorContentMessage="";case 13:return a.prev=13,r='{\n          "comment":"'.concat(s,'"\n        }'),i=JSON.parse(r),a.next=18,w["a"].postTweetReply({tweetId:t,data_JSON:i});case 18:if(n=a.sent,"success"===n.data.status){a.next=21;break}throw new Error;case 21:e.$emit("after-tweetReply-post"),e.teweetContent="",v["a"].fire({icon:"success",title:"發送成功!"}),a.next=29;break;case 26:a.prev=26,a.t0=a["catch"](13),v["a"].fire({icon:"error",title:"無法回復,請稍後"});case 29:case"end":return a.stop()}}),a,null,[[13,26]])})))()}}},C=m,h=(a("84d4"),a("2877")),y=Object(h["a"])(C,u,p,!1,null,"01b3f2ac",null),k=y.exports,b=a("2708"),R={name:"ReplyDetail",mixins:[b["b"]],components:{ReplyDetailModal:k},props:{initialTweet:{type:Object,required:!0}},data:function(){return{ReplyDetailModal:!1,isProcessing:!1,tweet:{user:{name:"",account:"",avatar:""},createdAt:"",replyCounts:0,likeCounts:0,isLiked:!1,id:-1}}},created:function(){this.fetchTweet()},methods:{clickChat:function(){this.ReplyDetailModal=!0},afterClickClose:function(){this.ReplyDetailModal=!1},fetchTweet:function(){this.tweet=this.initialTweet},afterTweetReplyPost:function(){this.ReplyDetailModal=!1,this.$emit("after-tweetReply-post")},addLike:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w["a"].addLike({tweetId:t});case 3:if(s=a.sent,r=s.data,"success"===r.status){a.next=7;break}throw new Error(r.message);case 7:e.tweet.likeCounts=e.tweet.likeCounts+1,e.tweet.isLiked=!0,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),v["a"].fire({icon:"error",title:"無法喜歡,請稍後在試"});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()},removeLike:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w["a"].removeLike({tweetId:t});case 3:if(s=a.sent,r=s.data,"success"===r.status){a.next=7;break}throw new Error(r.message);case 7:e.tweet.likeCounts=e.tweet.likeCounts-1,e.tweet.isLiked=!1,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](0),v["a"].fire({icon:"error",title:"無法取消喜歡,請稍後在試"});case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))()}}},A=R,g=(a("2b9f"),Object(h["a"])(A,o,l,!1,null,"b0d6b42c",null)),_=g.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reply-tweets"},[a("router-link",{attrs:{to:{name:"user",params:{id:t.tweetReply.UserId}}}},[a("div",{staticClass:"user-icon-wrapper"},[a("img",{staticClass:"user-icon",attrs:{src:t.tweetReply.User.avatar,alt:""}})])]),a("div",{staticClass:"reply-wrapper"},[a("div",{staticClass:"reply-user"},[a("span",{staticClass:"user-title"},[t._v(t._s(t.tweetReply.User.name))]),a("span",{staticClass:"user-account"},[t._v("＠"+t._s(t.tweetReply.User.account)+"．")]),a("span",{staticClass:"time"},[t._v(" "+t._s(t._f("fromNow")(t.tweetReply.createdAt))+" ")])]),a("div",{staticClass:"reply-account"},[a("span",{staticClass:"reply-account-mark"},[t._v("回覆")]),a("span",{staticClass:"reply-account-name"},[t._v("＠"+t._s(t.tweetUserAccount))])]),a("div",{staticClass:"reply-txt"},[t._v(" "+t._s(t.tweetReply.comment)+" ")])])],1)},E=[],M={name:"ReplyTweets",mixins:[b["b"]],props:{tweetReplies:{type:Object,required:!0},tweetUserAccount:{type:String,required:!0}},data:function(){return{tweetReply:this.tweetReplies}}},S=M,T=(a("0931"),Object(h["a"])(S,x,E,!1,null,"410ba686",null)),D=T.exports,O=a("2375"),U={components:{Menu:n["a"],Popular:c["a"],ReplyDetail:_,ReplyTweets:D,Spinner:O["a"]},data:function(){return{tweet:{user:{name:"",account:"",avatar:""},description:"",createdAt:"",replyCounts:0,likeCounts:0,isLiked:!1,id:-1},isLoading:!0,tweetReplies:""}},beforeRouteUpdate:function(t,e,a){var s=t.params.id;this.fetchReply(s),a()},created:function(){this.fetchReplyDetail(),this.fetchTweetReplies()},methods:{afterTweetReplyPost:function(){this.fetchReplyDetail(),this.fetchTweetReplies()},fetchReplyDetail:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s,r,i,n,c,o,l,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.prev=1,e.next=4,w["a"].getTweet({tweetId:a});case 4:s=e.sent,r=s.data,i=r.description,n=r.createdAt,c=r.replyCounts,o=r.likeCounts,l=r.isLiked,u=r.id,p=r.user,t.tweet.user.name=p.name,t.tweet.user.account=p.account,t.tweet.user.avatar=p.avatar,t.tweet.description=i,t.tweet.createdAt=n,t.tweet.replyCounts=c,t.tweet.likeCounts=o,t.tweet.isLiked=l,t.tweet.id=u,e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](1),v["a"].fire({icon:"warning",title:"無法取得資料"});case 21:case"end":return e.stop()}}),e,null,[[1,18]])})))()},fetchTweetReplies:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params.id,e.prev=1,e.next=4,w["a"].getTweetReplies({tweetId:a});case 4:s=e.sent,r=s.data,t.tweetReplies=r,t.isLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),t.isLoading=!1,v["a"].fire({icon:"error",title:"無法取得回復,請稍後在試"});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()}}},L=U,B=(a("1bd4"),Object(h["a"])(L,s,r,!1,null,"4f447ddf",null));e["default"]=B.exports},b718:function(t,e,a){},bcf9:function(t,e,a){},cc7e:function(t,e,a){},e01a:function(t,e,a){"use strict";var s=a("23e7"),r=a("83ab"),i=a("da84"),n=a("5135"),c=a("861d"),o=a("9bf2").f,l=a("e893"),u=i.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var p={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new u(t):void 0===t?u():u(t);return""===t&&(p[e]=!0),e};l(d,u);var w=d.prototype=u.prototype;w.constructor=d;var v=w.toString,f="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;o(w,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=v.call(t);if(n(p,t))return"";var a=f?e.slice(7,-1):e.replace(m,"$1");return""===a?void 0:a}}),s({global:!0,forced:!0},{Symbol:d})}}}]);
//# sourceMappingURL=chunk-3da8f41c.bbc40b7b.js.map