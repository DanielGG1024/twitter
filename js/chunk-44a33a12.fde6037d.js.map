{"version":3,"sources":["webpack:///./src/components/UserFollowing.vue?8310","webpack:///./src/components/UserFollowTab.vue?892d","webpack:///./src/components/Popular.vue?b7f4","webpack:///src/components/Popular.vue","webpack:///./src/components/Popular.vue?f2cc","webpack:///./src/components/Popular.vue?04f0","webpack:///./src/views/UserFollowing.vue?4474","webpack:///./src/components/UserFollowTab.vue?4bd0","webpack:///./src/components/UserFollowTab.vue?dc16","webpack:///./src/components/Popular.vue?2eab","webpack:///./src/views/UserFollowing.vue?2b8d","webpack:///./src/components/UserFollowing.vue?852a","webpack:///src/components/UserFollowing.vue","webpack:///./src/components/UserFollowing.vue?a9eb","webpack:///./src/components/UserFollowing.vue?f996","webpack:///src/views/UserFollowing.vue","webpack:///./src/views/UserFollowing.vue?cbb8","webpack:///./src/views/UserFollowing.vue?b5f0"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_l","user","key","id","attrs","avatar","_v","_s","name","account","on","$event","preventDefault","stopPropagation","deleteFollow","addFollow","staticRenderFns","data","isFollow","users","created","fetchTopUsers","methods","component","class","clicked","$route","script","userId","currentUserId","followings","removeFollow","following","followingId","introduction","clickRemoveBtn","clickFollowBtn","props","initialFollowings","type","Array","required","$emit","followerId","components","UserLeftColumn","UserHeader","Popular","UserFollowTab","UserFollowing","Number","params","fetchFollowing","fetchUserInfo","computed","watch","handler","deep","beforeRouteUpdate","console","log","to","from","next"],"mappings":"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","file":"js/chunk-44a33a12.fde6037d.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowing.vue?vue&type=style&index=0&id=8b8fdaaa&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowTab.vue?vue&type=style&index=0&id=3472e1b4&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"popular\"},[_c('div',{staticClass:\"popular-wrapper\"},[_vm._m(0),_vm._l((_vm.users),function(user){return _c('div',{key:user.id,staticClass:\"one-popular-wrapper\"},[_c('div',{staticClass:\"one-popular\"},[_c('div',{staticClass:\"user-icon-wrapper\"},[_c('img',{staticClass:\"user-icon\",attrs:{\"src\":user.avatar,\"alt\":\"\"}})]),_c('div',{staticClass:\"popular-txt\"},[_c('span',{staticClass:\"popular-title\"},[_vm._v(_vm._s(user.name))]),_c('a',{staticClass:\"popular-link\",attrs:{\"href\":\"\"}},[_vm._v(\"@\"+_vm._s(user.account))])]),_c('div',{staticClass:\"popular-follow\"},[(user.isFollowed)?_c('button',{staticClass:\"popular-follow-btn btn-active\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.deleteFollow(user.id)}}},[_vm._v(\" 正在跟隨 \")]):_c('button',{staticClass:\"popular-follow-btn\",on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.addFollow(user.id)}}},[_vm._v(\" 跟隨 \")])])])])})],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"popular-title-wrapper\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"Popular\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"popular\">\n    <div class=\"popular-wrapper\">\n      <div class=\"popular-title-wrapper\">\n        <div class=\"title\">Popular</div>\n      </div>\n      <div v-for=\"user in users\" :key=\"user.id\" class=\"one-popular-wrapper\">\n        <div class=\"one-popular\">\n          <div class=\"user-icon-wrapper\">\n            <img class=\"user-icon\" :src=\"user.avatar\" alt=\"\" />\n          </div>\n          <div class=\"popular-txt\">\n            <span class=\"popular-title\">{{ user.name }}</span>\n            <a class=\"popular-link\" href=\"\">@{{ user.account }}</a>\n          </div>\n          <div class=\"popular-follow\">\n            <button\n              v-if=\"user.isFollowed\"\n              @click.prevent.stop=\"deleteFollow(user.id)\"\n              class=\"popular-follow-btn btn-active\"\n            >\n              正在跟隨\n            </button>\n            <button\n              v-else\n              class=\"popular-follow-btn\"\n              @click.prevent.stop=\"addFollow(user.id)\"\n            >\n              跟隨\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { Toast } from \"./../utils/helpers\";\nimport tweetAPI from \"./../apis/tweet\";\nexport default {\n  name: \"Popular\",\n  data() {\n    return {\n      isFollow: true,\n      users: \"\",\n    };\n  },\n  created() {\n    this.fetchTopUsers();\n  },\n  methods: {\n    async deleteFollow(userId) {\n      try {\n        const response = await tweetAPI.removeFollow({ userId });\n        if (response.status !== 200) {\n          throw new Error();\n        }\n        this.fetchTopUsers();\n      } catch {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取消追蹤使用者,請稍後\",\n        });\n      }\n    },\n    async addFollow(userId) {\n      const data = `{\n        \"id\":\"${userId}\"\n      }`;\n      const data_JSON = JSON.parse(data);\n      try {\n        const response = await tweetAPI.addFollow({ data_JSON });\n        console.log(\"popular response\", response);\n        // this.users = this.users.forEach((item) => {\n        //   console.log(\"foreach\");\n        //   if (item.id === userId) {\n        //     ...item,\n        //     item.isFollowed: true\n        //   }else{\n        //     ...item\n        //   }\n        if (response.status !== 200) {\n          throw new Error();\n        }\n        this.fetchTopUsers();\n      } catch {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法追蹤使用者,請稍後\",\n        });\n      }\n    },\n    async fetchTopUsers() {\n      try {\n        const response = await tweetAPI.getTopUser();\n        const { data } = response;\n        // console.log(\"popular data\", data);\n        this.users = data;\n      } catch {\n        Toast.fire({\n          icon: \"warning\",\n          title: \"無法取得前十\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./../assets/scss/popular.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Popular.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Popular.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Popular.vue?vue&type=template&id=4a63b3c5&scoped=true&\"\nimport script from \"./Popular.vue?vue&type=script&lang=js&\"\nexport * from \"./Popular.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Popular.vue?vue&type=style&index=0&id=4a63b3c5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a63b3c5\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowing.vue?vue&type=style&index=0&id=a712e29e&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"user-follow-tab\"}},[_c('router-link',{attrs:{\"to\":{ name: 'follower' }}},[_c('div',{staticClass:\"follower tab\",class:{clicked: this.$route.name === 'follower'}},[_vm._v(\"跟隨者\")])]),_c('router-link',{attrs:{\"to\":{ name: 'following' }}},[_c('div',{staticClass:\"following tab\",class:{clicked: this.$route.name === 'following'}},[_vm._v(\"正在跟隨\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./UserFollowTab.vue?vue&type=template&id=3472e1b4&scoped=true&\"\nvar script = {}\nimport style0 from \"./UserFollowTab.vue?vue&type=style&index=0&id=3472e1b4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3472e1b4\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Popular.vue?vue&type=style&index=0&id=4a63b3c5&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"window demo\"},[_c('div',{staticClass:\"user\"},[_c('UserLeftColumn',{attrs:{\"userId\":_vm.userId,\"currentUserId\":_vm.currentUserId}}),_c('div',{staticClass:\"center-column\",attrs:{\"id\":\"center-column\"}},[_c('UserHeader',{attrs:{\"user\":_vm.user}}),_c('UserFollowTab'),_c('UserFollowing',{attrs:{\"initialFollowings\":_vm.followings},on:{\"after-follow-click\":_vm.addFollow,\"after-remove-follow\":_vm.removeFollow}})],1),_c('Popular')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"user-follower-list\"}},[_c('div',{staticClass:\"user-followers\"},_vm._l((_vm.initialFollowings),function(following){return _c('div',{key:following.followingId,staticClass:\"follower\"},[_c('div',{staticClass:\"avatar\"},[_c('div',{staticClass:\"avatar-img\"},[_c('img',{attrs:{\"src\":following.avatar,\"alt\":\"avatar\"}})])]),_c('div',{staticClass:\"follower-main\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(following.name))]),_c('div',{staticClass:\"tag-name\"},[_vm._v(\"@\"+_vm._s(following.account))]),_c('div',{staticClass:\"description scrollbar\"},[_vm._v(\" \"+_vm._s(following.introduction)+\" \")])]),(following.isFollowed)?_c('button',{staticClass:\"follower-btn following\",on:{\"click\":function($event){return _vm.clickRemoveBtn(following.followingId)}}},[_vm._v(\"正在追隨\")]):_c('button',{staticClass:\"follower-btn\",on:{\"click\":function($event){return _vm.clickFollowBtn(following.followingId)}}},[_vm._v(\"追隨\")])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"user-follower-list\">\n    <div class=\"user-followers\">\n      <div class=\"follower\" v-for=\"following in initialFollowings\"\n        :key=\"following.followingId\">\n        <div class=\"avatar\">\n          <div class=\"avatar-img\">\n            <img :src=\"following.avatar\" alt=\"avatar\" class=\"\" />\n          </div>\n        </div>\n        <div class=\"follower-main\">\n          <div class=\"name\">{{following.name}}</div>\n          <div class=\"tag-name\">@{{following.account}}</div>\n          <div class=\"description scrollbar\">\n            {{following.introduction}}\n          </div>\n        </div>\n        <button class=\"follower-btn following\" v-if=\"following.isFollowed\" @click=\"clickRemoveBtn(following.followingId)\">正在追隨</button>\n        <button class=\"follower-btn\" v-else @click=\"clickFollowBtn(following.followingId)\">追隨</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import tweetAPI from \"../apis/tweet\";\n// import { Toast } from \"./../utils/helpers\";\n\nexport default {\n  props: {\n    initialFollowings: {\n      type: Array,\n      required: true,\n    },\n  },\n  methods: {\n    clickFollowBtn(followerId) {\n      this.$emit(\"after-follow-click\", followerId)\n    },\n    clickRemoveBtn(followerId) {\n      this.$emit(\"after-remove-follow\", followerId)\n    },\n\n\n  },\n}\n</script>\n\n\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/scss/userFollower.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowing.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowing.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollowing.vue?vue&type=template&id=8b8fdaaa&scoped=true&\"\nimport script from \"./UserFollowing.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollowing.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserFollowing.vue?vue&type=style&index=0&id=8b8fdaaa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8b8fdaaa\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"window demo\">\n    <div class=\"user\">\n      <!-- left Column -->\n      <UserLeftColumn :userId=\"userId\" :currentUserId=\"currentUserId\"/>\n\n      <!-- center column -->\n      <div id=\"center-column\" class=\"center-column\">\n        <!-- header -->\n        <UserHeader :user=\"user\" />\n\n        <!-- follower/following -->\n        <UserFollowTab />\n        <UserFollowing\n          :initialFollowings=\"followings\"\n          @after-follow-click=\"addFollow\"\n          @after-remove-follow=\"removeFollow\"\n        />\n      </div>\n      <!-- right Column -->\n      <Popular />\n    </div>\n  </div>\n</template>\n\n<script>\nimport UserLeftColumn from \"../components/UserLeftColumn.vue\";\nimport UserHeader from \"../components/UserHeader.vue\";\nimport Popular from \"../components/Popular.vue\";\nimport UserFollowTab from \"../components/UserFollowTab.vue\";\nimport UserFollowing from \"../components/UserFollowing.vue\";\nimport usersAPI from \"../apis/users\";\nimport tweetAPI from \"../apis/tweet\";\nimport { Toast } from \"./../utils/helpers\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  components: {\n    UserLeftColumn,\n    UserHeader,\n    Popular,\n    UserFollowTab,\n    UserFollowing,\n  },\n  data() {\n    return {\n      userId: Number(this.$route.params.id),\n      currentUserId: -1,\n      user: {},\n      followings: [],\n    };\n  },\n  created() {\n    this.fetchFollowing(this.userId);\n    this.fetchUserInfo(this.userId);\n  },\n  computed: {\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\n  },\n  watch: {\n    followings: {\n      handler: function () {\n        this.fetchFollowing(this.userId);\n      },\n      deep: true,\n    },\n  },\n  beforeRouteUpdate(to, from, next) {\n    console.log(to, from);\n    // 路由改變時重新抓取資料\n    const { id } = to.params;\n    this.fetchFollowing(id);\n    this.userId = Number(id)\n    next();\n  },\n  methods: {\n    async fetchFollowing(userId) {\n      try {\n        const { data } = await usersAPI.getUserFollowings({ userId });\n        // console.log('123', data)\n        this.followings = data;\n      } catch (error) {\n        console.log(error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得個人資料，請稍後再試\",\n        });\n      }\n    },\n    async fetchUserInfo(userId) {\n      try {\n        const { data } = await usersAPI.get({ userId });\n        // console.log('123', data)\n        this.user = data;\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得個人資料，請稍後再試\",\n        });\n      }\n    },\n    async addFollow(userId) {\n      const data = `{\n        \"id\":\"${userId}\"\n      }`;\n      const data_JSON = JSON.parse(data);\n      try {\n        const response = await tweetAPI.addFollow({ data_JSON });\n        console.log(\"popular response\", response);\n      } catch {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法追蹤使用者,請稍後\",\n        });\n      }\n    },\n\n    async removeFollow(userId) {\n      console.log(userId);\n      try {\n        const response = await tweetAPI.removeFollow({ userId });\n        console.log(\"reponse\", response);\n        const { data } = response;\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n\n        this.followings = this.followings.map((following) => {\n          if (following.id !== userId) {\n            return following;\n          }\n          return {\n            ...following,\n            isfollowered: false,\n          };\n        });\n      } catch (error) {\n        console.log(error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取消喜歡,請稍後在試\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n// 先依照設計圖，給範圍框個線\n.window {\n  width: 1440px;\n  height: 1200px;\n  border: 1px purple solid;\n  margin: auto;\n}\n@import \"@/assets/scss/user.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowing.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowing.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollowing.vue?vue&type=template&id=a712e29e&scoped=true&\"\nimport script from \"./UserFollowing.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollowing.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserFollowing.vue?vue&type=style&index=0&id=a712e29e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a712e29e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}