{"version":3,"sources":["webpack:///./src/components/UserFollowTab.vue?892d","webpack:///./src/views/UserFollower.vue?ab4d","webpack:///./src/components/UserFollower.vue?1ee7","webpack:///src/components/UserFollower.vue","webpack:///./src/components/UserFollower.vue?84f3","webpack:///./src/components/UserFollower.vue?71f9","webpack:///src/views/UserFollower.vue","webpack:///./src/views/UserFollower.vue?5b6f","webpack:///./src/views/UserFollower.vue?6695","webpack:///./src/views/UserFollower.vue?b2c2","webpack:///./src/components/UserFollowTab.vue?4bd0","webpack:///./src/components/UserFollowTab.vue?dc16","webpack:///./src/components/UserFollower.vue?f412","webpack:///./src/components/UserRightColumn.vue?d22c","webpack:///src/components/UserRightColumn.vue","webpack:///./src/components/UserRightColumn.vue?cb21","webpack:///./src/components/UserRightColumn.vue?29ae","webpack:///./src/components/UserRightColumn.vue?da06"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","isLoading","expression","attrs","userId","currentUserId","user","followers","on","addFollow","removeFollow","staticRenderFns","_l","follower","key","followerId","avatar","_v","_s","account","introduction","$event","clickRemoveBtn","clickFollowBtn","props","initialFollowers","type","Array","required","methods","$emit","component","data","Number","$route","params","id","components","UserLeftColumn","UserHeader","Popular","UserFollowTab","UserFollower","created","fetchFollower","fetchUserInfo","computed","watch","handler","deep","beforeRouteUpdate","console","log","to","from","next","class","clicked","script","_m","topUser","stopPropagation","preventDefault","topUsers","fetchTopUsers"],"mappings":"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","file":"js/chunk-5bacf80e.d8d37ce6.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollowTab.vue?vue&type=style&index=0&id=3472e1b4&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"window demo\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoading),expression:\"!isLoading\"}],staticClass:\"user\"},[_c('UserLeftColumn',{attrs:{\"userId\":_vm.userId,\"currentUserId\":_vm.currentUserId}}),_c('div',{staticClass:\"center-column\",attrs:{\"id\":\"center-column\"}},[_c('UserHeader',{attrs:{\"user\":_vm.user}}),_c('UserFollowTab'),_c('UserFollower',{attrs:{\"initialFollowers\":_vm.followers},on:{\"after-follow-click\":_vm.addFollow,\"after-remove-follow\":_vm.removeFollow}})],1),_c('Popular')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"user-follower-list\"}},[_c('div',{staticClass:\"user-followers\"},_vm._l((_vm.initialFollowers),function(follower){return _c('div',{key:follower.followerId,staticClass:\"follower\"},[_c('div',{staticClass:\"avatar\"},[_c('div',{staticClass:\"avatar-img\"},[_c('img',{attrs:{\"src\":follower.avatar,\"alt\":\"avatar\"}})])]),_c('div',{staticClass:\"follower-main\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(follower.name))]),_c('div',{staticClass:\"tag-name\"},[_vm._v(\"@\"+_vm._s(follower.account))]),_c('div',{staticClass:\"description scrollbar\"},[_vm._v(\" \"+_vm._s(follower.introduction)+\" \")])]),(follower.isFollowed)?_c('button',{staticClass:\"follower-btn following\",on:{\"click\":function($event){return _vm.clickRemoveBtn(follower.followerId)}}},[_vm._v(\" 正在追隨 \")]):_c('button',{staticClass:\"follower-btn\",on:{\"click\":function($event){return _vm.clickFollowBtn(follower.followerId)}}},[_vm._v(\"追隨\")])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"user-follower-list\">\n    <div class=\"user-followers\">\n      <div\n        class=\"follower\"\n        v-for=\"follower in initialFollowers\"\n        :key=\"follower.followerId\"\n      >\n        <div class=\"avatar\">\n          <div class=\"avatar-img\">\n            <img :src=\"follower.avatar\" alt=\"avatar\" class=\"\" />\n          </div>\n        </div>\n        <div class=\"follower-main\">\n          <div class=\"name\">{{ follower.name }}</div>\n          <div class=\"tag-name\">@{{ follower.account }}</div>\n          <div class=\"description scrollbar\">\n            {{ follower.introduction }}\n          </div>\n        </div>\n        <button class=\"follower-btn following\" v-if=\"follower.isFollowed\" @click=\"clickRemoveBtn(follower.followerId)\">\n          正在追隨\n        </button>\n        <button class=\"follower-btn\" v-else @click=\"clickFollowBtn(follower.followerId)\">追隨</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// import tweetAPI from \"../apis/tweet\";\n// import { Toast } from \"./../utils/helpers\";\n\n\nexport default {\n  props: {\n    initialFollowers: {\n      type: Array,\n      required: true,\n    },\n  },\n  // data() {\n  //   return {\n  //     followers : this.initialFollowers,\n  //   }\n  // }\n  methods: {\n    clickFollowBtn(followerId) {\n      this.$emit(\"after-follow-click\", followerId)\n    },\n    clickRemoveBtn(followerId) {\n      this.$emit(\"after-remove-follow\", followerId)\n    },\n\n\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/scss/userFollower.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollower.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollower.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollower.vue?vue&type=template&id=740108cc&scoped=true&\"\nimport script from \"./UserFollower.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollower.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserFollower.vue?vue&type=style&index=0&id=740108cc&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"740108cc\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"window demo\">\n    <div class=\"user\" v-show=\"!isLoading\">\n      <!-- left Column -->\n      <UserLeftColumn :userId=\"userId\" :currentUserId=\"currentUserId\"/>\n\n      <!-- center column -->\n      <div id=\"center-column\" class=\"center-column\">\n        <!-- header -->\n        <UserHeader :user=\"user\" />\n\n        <!-- follower/following -->\n        <UserFollowTab />\n        <UserFollower\n          :initialFollowers=\"followers\"\n          @after-follow-click=\"addFollow\"\n          @after-remove-follow=\"removeFollow\"\n        />\n      </div>\n      <!-- right Column -->\n      <Popular />\n    </div>\n  </div>\n</template>\n\n<script>\nimport UserLeftColumn from \"../components/UserLeftColumn.vue\";\nimport UserHeader from \"../components/UserHeader.vue\";\nimport Popular from \"../components/UserRightColumn.vue\";\nimport UserFollowTab from \"../components/UserFollowTab.vue\";\nimport UserFollower from \"../components/UserFollower.vue\";\nimport usersAPI from \"../apis/users\";\nimport tweetAPI from \"../apis/tweet\";\nimport { Toast } from \"./../utils/helpers\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      isLoading: true,\n      userId: Number(this.$route.params.id),\n      currentUserId: -1,\n      user: {},\n      followers: [],\n    };\n  },\n  components: {\n    UserLeftColumn,\n    UserHeader,\n    Popular,\n    UserFollowTab,\n    UserFollower,\n  },\n  created() {\n    this.fetchFollower(this.userId);\n    this.fetchUserInfo(this.userId);\n  },\n  computed: {\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\n  },\n  watch: {\n    followers: {\n      handler: function () {\n        this.fetchFollower(this.userId);\n      },\n      deep: true,\n    },\n  },\n  beforeRouteUpdate(to, from, next) {\n    console.log(to, from);\n    // 路由改變時重新抓取資料\n    const { id } = to.params;\n    this.fetchFollower(id);\n    this.userId = Number(id)\n    next();\n  },\n\n  methods: {\n    async fetchFollower(userId) {\n      try {\n        this.isLoading = true\n        const { data } = await usersAPI.getUserFollowers({ userId });\n        // console.log('123', data)\n        this.followers = data;\n        this.isLoading = false;\n      } catch (error) {\n        console.log(error);\n        this.isLoading = false,\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得個人資料，請稍後再試\",\n        });\n      }\n    },\n    async fetchUserInfo(userId) {\n      try {\n        const { data } = await usersAPI.get({ userId });\n        // console.log('123', data)\n        this.user = data;\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得個人資料，請稍後再試\",\n        });\n      }\n    },\n    async addFollow(userId) {\n      const data = `{\n        \"id\":\"${userId}\"\n      }`;\n      const data_JSON = JSON.parse(data);\n      try {\n        const response = await tweetAPI.addFollow({ data_JSON });\n        console.log(\"popular response\", response);\n\n      } catch {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法追蹤使用者,請稍後\",\n        });\n      }\n    },\n\n    async removeFollow(userId) {\n      console.log(userId);\n      try {\n        const response = await tweetAPI.removeFollow({ userId });\n        console.log(\"reponse\", response);\n        const { data } = response;\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n\n        this.followers = this.followers.map((follower) => {\n          if (follower.id !== userId) {\n            return follower;\n          }\n          return {\n            ...follower,\n            isfollowered: false,\n          };\n        });\n      } catch (error) {\n        console.log(error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取消喜歡,請稍後在試\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n// 先依照設計圖，給範圍框個線\n.window {\n  width: 1440px;\n  height: 1200px;\n  // border: 1px purple solid;\n  margin: auto;\n}\n@import \"@/assets/scss/user.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollower.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollower.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserFollower.vue?vue&type=template&id=9a6ea8d0&scoped=true&\"\nimport script from \"./UserFollower.vue?vue&type=script&lang=js&\"\nexport * from \"./UserFollower.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserFollower.vue?vue&type=style&index=0&id=9a6ea8d0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9a6ea8d0\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollower.vue?vue&type=style&index=0&id=9a6ea8d0&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"user-follow-tab\"}},[_c('router-link',{attrs:{\"to\":{ name: 'follower' }}},[_c('div',{staticClass:\"follower tab\",class:{clicked: this.$route.name === 'follower'}},[_vm._v(\"跟隨者\")])]),_c('router-link',{attrs:{\"to\":{ name: 'following' }}},[_c('div',{staticClass:\"following tab\",class:{clicked: this.$route.name === 'following'}},[_vm._v(\"正在跟隨\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./UserFollowTab.vue?vue&type=template&id=3472e1b4&scoped=true&\"\nvar script = {}\nimport style0 from \"./UserFollowTab.vue?vue&type=style&index=0&id=3472e1b4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3472e1b4\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserFollower.vue?vue&type=style&index=0&id=740108cc&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"popular right-column\",attrs:{\"id\":\"right-column\"}},[_vm._m(0),_vm._l((_vm.topUsers),function(topUser){return _c('div',{key:topUser.id,staticClass:\"popular-person\"},[_c('div',{staticClass:\"popular-person-detail\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":topUser.avatar,\"alt\":\"avatar\"}})]),_c('div',{staticClass:\"popular-account\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(topUser.name))]),_c('div',{staticClass:\"tag-name\"},[_vm._v(\"@\"+_vm._s(topUser.account))])]),(topUser.isFollowed)?_c('button',{staticClass:\"popular-follow-btn isFollowed\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.removeFollow(topUser.id)}}},[_vm._v(\" 正在跟隨 \")]):_c('button',{staticClass:\"popular-follow-btn\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addFollow(topUser.id)}}},[_vm._v(\" 跟隨 \")])])])})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"popular-header\"},[_c('div',{staticClass:\"popular-header-title\"},[_vm._v(\"Popular\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"right-column\" class=\"popular right-column\">\n    <header class=\"popular-header\">\n      <div class=\"popular-header-title\">Popular</div>\n    </header>\n\n    <div class=\"popular-person\" v-for=\"topUser in topUsers\" :key=\"topUser.id\">\n      <div class=\"popular-person-detail\">\n        <div class=\"avatar\">\n          <img :src=\"topUser.avatar\" alt=\"avatar\" class=\"\" />\n        </div>\n        <div class=\"popular-account\">\n          <div class=\"name\">{{ topUser.name }}</div>\n          <div class=\"tag-name\">@{{ topUser.account }}</div>\n        </div>\n        <button\n          v-if=\"topUser.isFollowed\"\n          @click.stop.prevent=\"removeFollow(topUser.id)\"\n          class=\"popular-follow-btn isFollowed\"\n        >\n          正在跟隨\n        </button>\n        <button\n          v-else\n          @click.stop.prevent=\"addFollow(topUser.id)\"\n          class=\"popular-follow-btn\"\n        >\n          跟隨\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Toast } from \"./../utils/helpers\";\nimport usersAPI from \"./../apis/users\";\nimport tweetAPI from \"./../apis/tweet\";\n\nexport default {\n  data() {\n    return {\n      topUsers: [],\n      currentUserId: Number(this.$route.params.id),\n    };\n  },\n  created() {\n    this.fetchTopUsers();\n  },\n  methods: {\n    async fetchTopUsers() {\n      try {\n        const { data } = await usersAPI.getTopUsers();\n        // console.log(\"this\", data);\n        this.topUsers = data;\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得推文，請稍後再試\",\n        });\n      }\n    },\n    async addFollow(userId) {\n      const data = `{\n        \"id\":\"${userId}\"\n      }`;\n      const data_JSON = JSON.parse(data);\n      try {\n        const response = await tweetAPI.addFollow({ data_JSON });\n        console.log(\"popular response\", response);\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n        this.topUsers = this.topUsers.map((topUser) => {\n          if (topUser.id !== userId) {\n            return topUser;\n          }\n          return {\n            ...topUser,\n            isFolowed: true,\n          };\n        });\n      } catch (error) {\n        console.log(error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法追蹤使用者,請稍後\",\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/scss/userRightColumn.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserRightColumn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserRightColumn.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserRightColumn.vue?vue&type=template&id=cacb631a&scoped=true&\"\nimport script from \"./UserRightColumn.vue?vue&type=script&lang=js&\"\nexport * from \"./UserRightColumn.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserRightColumn.vue?vue&type=style&index=0&id=cacb631a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cacb631a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserRightColumn.vue?vue&type=style&index=0&id=cacb631a&lang=scss&scoped=true&\""],"sourceRoot":""}