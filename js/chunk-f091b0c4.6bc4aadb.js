(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f091b0c4"],{2889:function(e,t,r){"use strict";r("f66c")},"2e75":function(e,t,r){},7384:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"window demo"},[r("div",{staticClass:"user"},[r("UserLeftColumn",{attrs:{userId:e.userId,currentUserId:e.currentUserId}}),r("div",{staticClass:"center-column",attrs:{id:"center-column"}},[r("UserHeader",{attrs:{user:e.user}}),r("UserFollowTab"),r("UserFollower",{attrs:{initialFollowers:e.followers},on:{"after-follow-click":e.addFollow,"after-remove-follow":e.removeFollow}})],1),r("Popular")],1)])},o=[],n=r("1da1"),s=r("5530"),c=(r("96cf"),r("a9e3"),r("d81d"),r("232c")),l=r("3e69"),i=r("b12b"),u=r("99f5"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"user-follower-list"}},[r("div",{staticClass:"user-followers"},e._l(e.initialFollowers,(function(t){return r("div",{key:t.followerId,staticClass:"follower"},[r("div",{staticClass:"avatar"},[r("div",{staticClass:"avatar-img"},[r("img",{attrs:{src:t.avatar,alt:"avatar"}})])]),r("div",{staticClass:"follower-main"},[r("div",{staticClass:"name"},[e._v(e._s(t.name))]),r("div",{staticClass:"tag-name"},[e._v("@"+e._s(t.account))]),r("div",{staticClass:"description scrollbar"},[e._v(" "+e._s(t.introduction)+" ")])]),t.isFollowed?r("button",{staticClass:"follower-btn following",on:{click:function(r){return e.clickRemoveBtn(t.followerId)}}},[e._v(" 正在追隨 ")]):r("button",{staticClass:"follower-btn",on:{click:function(r){return e.clickFollowBtn(t.followerId)}}},[e._v("追隨")])])})),0)])},d=[],p={props:{initialFollowers:{type:Array,required:!0}},methods:{clickFollowBtn:function(e){this.$emit("after-follow-click",e)},clickRemoveBtn:function(e){this.$emit("after-remove-follow",e)}}},v=p,w=(r("a34c"),r("2877")),m=Object(w["a"])(v,f,d,!1,null,"740108cc",null),h=m.exports,b=r("4cce"),g=r("7482"),k=r("2fa3"),_=r("2f62"),C={data:function(){return{userId:Number(this.$route.params.id),currentUserId:-1,user:{},followers:[]}},components:{UserLeftColumn:c["a"],UserHeader:l["a"],Popular:i["a"],UserFollowTab:u["a"],UserFollower:h},created:function(){this.fetchFollower(this.userId),this.fetchUserInfo(this.userId)},computed:Object(s["a"])({},Object(_["b"])(["currentUser","isAuthenticated"])),watch:{followers:{handler:function(){this.fetchFollower(this.userId)},deep:!0}},beforeRouteUpdate:function(e,t,r){console.log(e,t);var a=e.params.id;this.fetchFollower(a),this.userId=Number(a),r()},methods:{fetchFollower:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b["a"].getUserFollowers({userId:e});case 3:a=r.sent,o=a.data,t.followers=o,r.next=12;break;case 8:r.prev=8,r.t0=r["catch"](0),console.log(r.t0),k["a"].fire({icon:"error",title:"無法取得個人資料，請稍後再試"});case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()},fetchUserInfo:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,b["a"].get({userId:e});case 3:a=r.sent,o=a.data,t.user=o,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),k["a"].fire({icon:"error",title:"無法取得個人資料，請稍後再試"});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},addFollow:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r='{\n        "id":"'.concat(e,'"\n      }'),a=JSON.parse(r),t.prev=2,t.next=5,g["a"].addFollow({data_JSON:a});case 5:o=t.sent,console.log("popular response",o),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),k["a"].fire({icon:"error",title:"無法追蹤使用者,請稍後"});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},removeFollow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.prev=1,r.next=4,g["a"].removeFollow({userId:e});case 4:if(a=r.sent,console.log("reponse",a),o=a.data,"success"===o.status){r.next=9;break}throw new Error(o.message);case 9:t.followers=t.followers.map((function(t){return t.id!==e?t:Object(s["a"])(Object(s["a"])({},t),{},{isfollowered:!1})})),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](1),console.log(r.t0),k["a"].fire({icon:"error",title:"無法取消喜歡,請稍後在試"});case 16:case"end":return r.stop()}}),r,null,[[1,12]])})))()}}},F=C,U=(r("9fee"),Object(w["a"])(F,a,o,!1,null,"edbedd94",null));t["default"]=U.exports},"99f5":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"user-follow-tab"}},[r("router-link",{attrs:{to:{name:"follower"}}},[r("div",{staticClass:"follower tab",class:{clicked:"follower"===this.$route.name}},[e._v("跟隨者")])]),r("router-link",{attrs:{to:{name:"following"}}},[r("div",{staticClass:"following tab",class:{clicked:"following"===this.$route.name}},[e._v("正在跟隨")])])],1)},o=[],n=(r("2889"),r("2877")),s={},c=Object(n["a"])(s,a,o,!1,null,"3472e1b4",null);t["a"]=c.exports},"9fee":function(e,t,r){"use strict";r("fcaa")},a34c:function(e,t,r){"use strict";r("b26d")},b12b:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"popular right-column",attrs:{id:"right-column"}},[e._m(0),e._l(e.topUsers,(function(t){return r("div",{key:t.id,staticClass:"popular-person"},[r("div",{staticClass:"popular-person-detail"},[r("div",{staticClass:"avatar"},[r("img",{attrs:{src:t.avatar,alt:"avatar"}})]),r("div",{staticClass:"popular-account"},[r("div",{staticClass:"name"},[e._v(e._s(t.name))]),r("div",{staticClass:"tag-name"},[e._v("@"+e._s(t.account))])]),t.isFollowed?r("button",{staticClass:"popular-follow-btn isFollowed",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.removeFollow(t.id)}}},[e._v(" 正在跟隨 ")]):r("button",{staticClass:"popular-follow-btn",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.addFollow(t.id)}}},[e._v(" 跟隨 ")])])])}))],2)},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{staticClass:"popular-header"},[r("div",{staticClass:"popular-header-title"},[e._v("Popular")])])}],n=r("5530"),s=r("1da1"),c=(r("96cf"),r("a9e3"),r("d81d"),r("2fa3")),l=r("4cce"),i=r("7482"),u={data:function(){return{topUsers:[],currentUserId:Number(this.$route.params.id)}},created:function(){this.fetchTopUsers()},methods:{fetchTopUsers:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].getTopUsers();case 3:r=t.sent,a=r.data,e.topUsers=a,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),c["a"].fire({icon:"error",title:"無法取得推文，請稍後再試"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},addFollow:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a='{\n        "id":"'.concat(e,'"\n      }'),o=JSON.parse(a),r.prev=2,r.next=5,i["a"].addFollow({data_JSON:o});case 5:if(s=r.sent,console.log("popular response",s),"success"===a.status){r.next=9;break}throw new Error(a.message);case 9:t.topUsers=t.topUsers.map((function(t){return t.id!==e?t:Object(n["a"])(Object(n["a"])({},t),{},{isFolowed:!0})})),r.next=16;break;case 12:r.prev=12,r.t0=r["catch"](2),console.log(r.t0),c["a"].fire({icon:"error",title:"無法追蹤使用者,請稍後"});case 16:case"end":return r.stop()}}),r,null,[[2,12]])})))()}}},f=u,d=(r("d822"),r("2877")),p=Object(d["a"])(f,a,o,!1,null,"cacb631a",null);t["a"]=p.exports},b26d:function(e,t,r){},d822:function(e,t,r){"use strict";r("2e75")},f66c:function(e,t,r){},fcaa:function(e,t,r){}}]);
//# sourceMappingURL=chunk-f091b0c4.6bc4aadb.js.map