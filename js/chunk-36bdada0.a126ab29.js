(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36bdada0"],{2889:function(e,t,r){"use strict";r("f66c")},"60e2":function(e,t,r){"use strict";r("a422")},7384:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"window demo"},[r("div",{staticClass:"user"},[r("UserLeftColumn",{attrs:{userId:e.userId,currentUserId:e.currentUserId}}),r("div",{staticClass:"center-column",attrs:{id:"center-column"}},[r("UserHeader",{attrs:{user:e.user}}),r("UserFollowTab"),r("UserFollower",{attrs:{initialFollowers:e.followers},on:{"after-follow-click":e.addFollow,"after-remove-follow":e.removeFollow}})],1),r("Popular")],1)])},n=[],a=r("1da1"),s=r("5530"),l=(r("96cf"),r("a9e3"),r("d81d"),r("232c")),i=r("3e69"),c=r("3b8f"),u=r("99f5"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"user-follower-list"}},[r("div",{staticClass:"user-followers"},e._l(e.initialFollowers,(function(t){return r("div",{key:t.followerId,staticClass:"follower"},[r("div",{staticClass:"avatar"},[r("div",{staticClass:"avatar-img"},[r("img",{attrs:{src:e._f("emptyImage")(t.avatar),alt:"avatar"}})])]),r("div",{staticClass:"follower-main"},[r("div",{staticClass:"name"},[e._v(e._s(t.name))]),r("div",{staticClass:"tag-name"},[e._v("@"+e._s(t.account))]),r("div",{staticClass:"description scrollbar"},[e._v(" "+e._s(t.introduction)+" ")])]),t.isFollowed?r("button",{staticClass:"follower-btn following",on:{click:function(r){return e.clickRemoveBtn(t.followerId)}}},[e._v(" 正在跟隨 ")]):r("button",{staticClass:"follower-btn",on:{click:function(r){return e.clickFollowBtn(t.followerId)}}},[e._v(" 跟隨 ")])])})),0)])},d=[],w=r("2708"),v={mixins:[w["b"],w["a"]],props:{initialFollowers:{type:Array,required:!0}},methods:{clickFollowBtn:function(e){this.$emit("after-follow-click",e)},clickRemoveBtn:function(e){this.$emit("after-remove-follow",e)}}},m=v,h=(r("8e4f"),r("2877")),p=Object(h["a"])(m,f,d,!1,null,"2b1650f0",null),b=p.exports,g=r("4cce"),k=r("7482"),F=r("2fa3"),I=r("2f62"),_={components:{UserLeftColumn:l["a"],UserHeader:i["a"],Popular:c["a"],UserFollowTab:u["a"],UserFollower:b},data:function(){return{isLoading:!0,userId:Number(this.$route.params.id),currentUserId:-1,user:{},followers:[]}},created:function(){this.fetchFollower(this.userId),this.fetchUserInfo(this.userId)},computed:Object(s["a"])({},Object(I["b"])(["currentUser","isAuthenticated"])),watch:{followers:{handler:function(){this.fetchFollower(this.userId)}}},beforeRouteUpdate:function(e,t,r){console.log(e,t);var o=e.params.id;this.fetchFollower(o),this.userId=Number(o),r()},methods:{fetchFollower:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,g["a"].getUserFollowers({userId:e});case 4:o=r.sent,n=o.data,t.followers=n,t.isLoading=!1,r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),console.log(r.t0),t.isLoading=!1,F["a"].fire({icon:"error",title:"無法取得個人資料，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},fetchUserInfo:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,g["a"].get({userId:e});case 4:o=r.sent,n=o.data,t.user=n,t.isLoading=!1,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),t.isLoading=!1,F["a"].fire({icon:"error",title:"無法取得個人資料，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},addFollow:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o='{\n        "id":"'.concat(e,'"\n      }'),n=JSON.parse(o),r.prev=2,r.next=5,k["a"].addFollow({data_JSON:n});case 5:a=r.sent,console.log("popular response",a),t.fetchFollower(t.userId),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](2),F["a"].fire({icon:"error",title:"無法追蹤使用者,請稍後"});case 13:case"end":return r.stop()}}),r,null,[[2,10]])})))()},removeFollow:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e),r.prev=1,r.next=4,k["a"].removeFollow({userId:e});case 4:if(o=r.sent,console.log("reponse",o),n=o.data,"success"===n.status){r.next=9;break}throw new Error(n.message);case 9:t.followers=t.followers.map((function(t){return t.id!==e?t:Object(s["a"])(Object(s["a"])({},t),{},{isfollowered:!1})})),t.fetchFollower(t.userId),r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](1),console.log(r.t0),F["a"].fire({icon:"error",title:"無法取消喜歡,請稍後在試"});case 17:case"end":return r.stop()}}),r,null,[[1,13]])})))()}}},x=_,C=(r("60e2"),Object(h["a"])(x,o,n,!1,null,"c2205526",null));t["default"]=C.exports},"8e4f":function(e,t,r){"use strict";r("996c")},"996c":function(e,t,r){},"99f5":function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"user-follow-tab"}},[r("router-link",{attrs:{to:{name:"follower"}}},[r("div",{staticClass:"follower tab",class:{clicked:"follower"===this.$route.name}},[e._v("跟隨者")])]),r("router-link",{attrs:{to:{name:"following"}}},[r("div",{staticClass:"following tab",class:{clicked:"following"===this.$route.name}},[e._v("正在跟隨")])])],1)},n=[],a=(r("2889"),r("2877")),s={},l=Object(a["a"])(s,o,n,!1,null,"3472e1b4",null);t["a"]=l.exports},a422:function(e,t,r){},d81d:function(e,t,r){"use strict";var o=r("23e7"),n=r("b727").map,a=r("1dde"),s=a("map");o({target:"Array",proto:!0,forced:!s},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},f66c:function(e,t,r){}}]);
//# sourceMappingURL=chunk-36bdada0.a126ab29.js.map