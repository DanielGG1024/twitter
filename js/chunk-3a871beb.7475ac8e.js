(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a871beb"],{4207:function(e,t,s){},"4cce":function(e,t,s){"use strict";var r=s("2fa3"),a=function(){return localStorage.getItem("token")};t["a"]={getCurrentUser:function(){return r["b"].get("/get-current-user",{headers:{Authorization:"Bearer ".concat(a())}})},get:function(e){var t=e.userId;return r["b"].get("/users/".concat(t),{headers:{Authorization:"Bearer ".concat(a())}})},update:function(e){var t=e.userId,s=e.formData;return r["b"].put("/users/".concat(t),s,{headers:{Authorization:"Bearer ".concat(a())}})},getTopUsers:function(){return r["b"].get("users/top",{headers:{Authorization:"Bearer ".concat(a())}})},getUserTweets:function(e){var t=e.userId;return r["b"].get("/users/".concat(t,"/tweets"),{headers:{Authorization:"Bearer ".concat(a())}})},getUserReplies:function(e){var t=e.userId;return r["b"].get("/users/".concat(t,"/replied_tweets"),{headers:{Authorization:"Bearer ".concat(a())}})},getUserLikes:function(e){var t=e.userId;return r["b"].get("/users/".concat(t,"/likes"),{headers:{Authorization:"Bearer ".concat(a())}})},getUserFollowers:function(e){var t=e.userId;return r["b"].get("/users/".concat(t,"/followers"),{headers:{Authorization:"Bearer ".concat(a())}})},getUserFollowings:function(e){var t=e.userId;return r["b"].get("/users/".concat(t,"/followings"),{headers:{Authorization:"Bearer ".concat(a())}})}}},"971f":function(e,t,s){"use strict";s("4207")},c03c:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"self-like-list"}},[e.isLoading?r("Spinner"):e._l(e.likes,(function(t){return r("div",{key:t.index,staticClass:"like"},[r("router-link",{attrs:{to:{name:"user",params:{id:t.User.id}}}},[r("div",{staticClass:"avatar"},[r("div",{staticClass:"avatar-img"},[r("img",{attrs:{src:e._f("emptyImage")(t.User.avatar),alt:""}})])])]),r("div",{staticClass:"like-main"},[r("router-link",{attrs:{to:{name:"Reply",params:{id:t.TweetId}}}},[r("div",{staticClass:"like-user-info"},[r("div",{staticClass:"name"},[e._v(e._s(t.User.name))]),r("div",{staticClass:"account"},[e._v(" @"+e._s(t.User.account)),r("span",[e._v("‧"+e._s(e._f("fromNow")(t.createdAt)))])])]),r("div",{staticClass:"like-content scrollbar"},[e._v(" "+e._s(t.description)+" ")])]),r("div",{staticClass:"like-status"},[r("div",{staticClass:"replies state"},[r("img",{staticClass:"replies-img",attrs:{src:s("b74f"),alt:"chat-icon"},on:{click:function(s){return e.clickChatBtn(t.TweetId)}}}),r("div",{staticClass:"replies-count count"},[e._v(e._s(t.RepliesCount))])]),r("div",{staticClass:"likes state"},[t.isliked?r("button",{attrs:{disabled:e.isProcessing},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.removeLike(t)}}},[r("img",{staticClass:"likes-img",attrs:{src:s("4167"),alt:"heart-icon"}})]):r("button",{attrs:{disabled:e.isProcessing},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.addLike(t)}}},[r("img",{staticClass:"likes-img",attrs:{src:s("b4af"),alt:"heart-icon",disabled:e.isProcessing}})]),r("div",{staticClass:"likes-count count"},[e._v(e._s(t.LikesCount))])])])],1)],1)})),r("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.noLength,expression:"noLength === true"}],staticClass:"noLength"},[e._v(" 目前沒有喜歡的貼文 ")]),r("ReplyModal",{attrs:{ReplyModalSwitch:e.ReplyModal,tweet:e.tweet},on:{"after-click-background":e.afterClickClose,"after-click-close":e.afterClickClose,"after-tweetReply-post":e.afterTweetReplyPost}})],2)},a=[],i=s("1da1"),n=(s("96cf"),s("a9e3"),s("7db0"),s("2375")),c=s("2797"),o=s("2708"),u=s("4cce"),l=s("2fa3"),d=s("7482"),f={mixins:[o["b"],o["a"]],components:{ReplyModal:c["a"],Spinner:n["a"]},data:function(){return{likes:[],tweet:{User:{avatar:""}},ReplyModal:!1,userId:Number(this.$route.params.id),isProcessing:!1,isLoading:!0,noLength:!1}},created:function(){this.fetchUserLikes(this.userId)},beforeRouteUpdate:function(e,t,s){var r=e.params.id;this.fetchUserLikes(r),s()},methods:{fetchUserLikes:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isLoading=!0,s.next=4,u["a"].getUserLikes({userId:e});case 4:r=s.sent,a=r.data,t.likes=a,t.isLoading=!1,0===t.likes.length&&(t.noLength=!0),s.next=15;break;case 11:s.prev=11,s.t0=s["catch"](0),t.isLoading=!1,l["a"].fire({icon:"error",title:"無法取得推文，請稍後再試"});case 15:case"end":return s.stop()}}),s,null,[[0,11]])})))()},addLike:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isProcessing=!0,r=e.TweetId,s.next=5,d["a"].addLike({tweetId:r});case 5:if(a=s.sent,i=a.data,"success"===i.status){s.next=9;break}throw new Error(i.message);case 9:e.LikesCount+=1,e.isliked=!0,t.isProcessing=!1,s.next=19;break;case 14:s.prev=14,s.t0=s["catch"](0),t.isProcessing=!1,console.log(s.t0),l["a"].fire({icon:"error",title:"無法喜歡,請稍後在試"});case 19:case"end":return s.stop()}}),s,null,[[0,14]])})))()},removeLike:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var r,a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,t.isProcessing=!0,r=e.TweetId,s.next=5,d["a"].removeLike({tweetId:r});case 5:if(a=s.sent,i=a.data,"success"===i.status){s.next=9;break}throw new Error(i.message);case 9:e.isliked=!1,e.LikesCount-=1,t.isProcessing=!1,s.next=19;break;case 14:s.prev=14,s.t0=s["catch"](0),t.isProcessing=!1,console.log(s.t0),l["a"].fire({icon:"error",title:"無法取消喜歡,請稍後在試"});case 19:case"end":return s.stop()}}),s,null,[[0,14]])})))()},clickChatBtn:function(e){this.ReplyModal=!0;var t=this.likes.find((function(t){return t.TweetId===e}));this.tweet=t},afterClickClose:function(){this.ReplyModal=!1},afterTweetReplyPost:function(){this.ReplyModal=!1,this.$emit("after-tweetReply-post"),this.fetchUserLikes(this.userId)}}},h=f,g=(s("971f"),s("2877")),p=Object(g["a"])(h,r,a,!1,null,"19a1cd91",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-3a871beb.7475ac8e.js.map