{"version":3,"sources":["webpack:///./src/components/MainTweetPost.vue?1961","webpack:///./src/components/MainTweets.vue?be62","webpack:///./src/views/Main.vue?f121","webpack:///./src/components/MainTweetPost.vue?dfa4","webpack:///src/components/MainTweetPost.vue","webpack:///./src/components/MainTweetPost.vue?a5a0","webpack:///./src/components/MainTweetPost.vue?f445","webpack:///./src/components/MainTweets.vue?1efa","webpack:///src/components/MainTweets.vue","webpack:///./src/components/MainTweets.vue?0cb2","webpack:///./src/components/MainTweets.vue?cb5f","webpack:///src/views/Main.vue","webpack:///./src/views/Main.vue?7343","webpack:///./src/views/Main.vue?663b","webpack:///./src/views/Main.vue?0940"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","afterTweetPost","_m","attrs","allTweets","staticRenderFns","_v","currentUser","avatar","directives","name","rawName","value","expression","domProps","$event","target","composing","mainTweetPost","isProcessing","preventDefault","stopPropagation","handleSubmit","apply","arguments","_s","submitMessage","computed","methods","tweet","trim","length","fire","icon","title","data","data_JSON","JSON","parse","response","postTweet","console","log","status","Error","$emit","component","ref","_l","key","TweetId","params","id","User","account","_f","createdAt","description","clickChatBtn","RepliesCount","removeLike","addLike","LikesCount","ReplyModal","afterClickClose","afterTweetReplyPost","mixins","components","props","type","Array","require","find","namd","Menu","Popular","MainTweetPost","MainTweets","Spinner","isLoading","created","fetchTweets"],"mappings":"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","file":"js/chunk-63653771.b97c45b2.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTweetPost.vue?vue&type=style&index=0&id=7259580d&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTweets.vue?vue&type=style&index=0&id=166e2e48&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"main-container\"},[_c('Menu',{on:{\"after-tweet-post\":_vm.afterTweetPost}}),_c('main',{staticClass:\"content\"},[_c('div',{staticClass:\"content-post\"},[_vm._m(0),_c('MainTweetPost',{on:{\"after-tweet-post\":_vm.afterTweetPost}})],1),(_vm.isLoading)?_c('Spinner'):_c('MainTweets',{attrs:{\"allTweets\":_vm.allTweets},on:{\"after-tweetReply-post\":_vm.afterTweetPost}})],1),_c('Popular')],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-header\"},[_c('span',{staticClass:\"title\"},[_vm._v(\"首頁\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-tweet\"},[_c('div',{staticClass:\"user-icon-wrapper\"},[_c('img',{staticClass:\"user-icon\",attrs:{\"src\":_vm.currentUser.avatar,\"alt\":\"\"}})]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mainTweetPost),expression:\"mainTweetPost\"}],staticClass:\"main-tweet-txt\",attrs:{\"name\":\"\",\"id\":\"\",\"value\":\"hello\",\"placeholder\":\"有甚麼新鮮事?\"},domProps:{\"value\":(_vm.mainTweetPost)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.mainTweetPost=$event.target.value}}}),_c('button',{staticClass:\"main-tweet-button\",attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit.apply(null, arguments)}}},[_vm._v(\" \"+_vm._s(_vm.submitMessage)+\" \")]),_c('p')])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main-tweet\">\n    <div class=\"user-icon-wrapper\">\n      <img class=\"user-icon\" :src=\"currentUser.avatar\" alt=\"\" />\n    </div>\n    <textarea\n      class=\"main-tweet-txt\"\n      name=\"\"\n      id=\"\"\n      value=\"hello\"\n      placeholder=\"有甚麼新鮮事?\"\n      v-model=\"mainTweetPost\"\n    ></textarea>\n    <button\n      @click.prevent.stop=\"handleSubmit\"\n      class=\"main-tweet-button\"\n      :disabled=\"isProcessing\"\n    >\n      {{ submitMessage }}\n    </button>\n    <p></p>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { Toast } from \"./../utils/helpers\";\nimport tweetAPI from \"./../apis/tweet\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"MainTweetPost\",\n  data() {\n    return {\n      mainTweetPost: \"\",\n      avatar: \"\",\n      isProcessing: false,\n      submitMessage: \"推文\",\n    };\n  },\n  computed: {\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\n  },\n  methods: {\n    async handleSubmit() {\n      const tweet = this.mainTweetPost;\n      if (tweet.trim().length < 1) {\n        Toast.fire({\n          icon: \"warning\",\n          title: \"內容不能為空白\",\n        });\n        return;\n      }\n      if (tweet.length > 140) {\n        Toast.fire({\n          icon: \"warning\",\n          title: \"內容不能超過140個字\",\n        });\n        return;\n      }\n      try {\n        this.isProcessing = true;\n        this.submitMessage = \"稍後\";\n        const data = `{\n          \"description\":\"${tweet}\"\n        }`;\n        const data_JSON = JSON.parse(data);\n        const response = await tweetAPI.postTweet({ data_JSON });\n        console.log(\"maintweetpost\");\n        if (response.data.status !== \"success\") {\n          throw new Error();\n        }\n        Toast.fire({\n          icon: \"success\",\n          title: \"發送成功!\",\n        });\n        this.$emit(\"after-tweet-post\");\n        this.mainTweetPost = \"\";\n        this.isProcessing = false;\n        this.submitMessage = \"推文\";\n      } catch {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法送出推文,請稍後\",\n        });\n        this.isProcessing = false;\n        this.submitMessage = \"推文\";\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"./../assets/scss/maintweetpost.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTweetPost.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTweetPost.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MainTweetPost.vue?vue&type=template&id=7259580d&scoped=true&\"\nimport script from \"./MainTweetPost.vue?vue&type=script&lang=ts&\"\nexport * from \"./MainTweetPost.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MainTweetPost.vue?vue&type=style&index=0&id=7259580d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7259580d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"chat\",staticClass:\"tweets scrollbar\"},[_vm._l((_vm.allTweets),function(tweet){return _c('div',{key:tweet.TweetId,staticClass:\"onetweet\"},[_c('div',{staticClass:\"onetweet-user-icon-wrapper\"},[_c('router-link',{attrs:{\"to\":{ name: 'user', params: { id: tweet.User.id } }}},[_c('img',{staticClass:\"user-icon\",attrs:{\"src\":tweet.User.avatar,\"alt\":\"\"}})])],1),_c('div',{staticClass:\"onetweet-txt-wrapper\"},[_c('div',{staticClass:\"onetweet-txt-header\"},[_c('router-link',{attrs:{\"to\":{ name: 'Reply', params: { id: tweet.TweetId } }}},[_c('span',{staticClass:\"user-title\"},[_vm._v(_vm._s(tweet.User.name))]),_c('span',{staticClass:\"user-info\"},[_c('a',{staticClass:\"user-link\",attrs:{\"href\":\"#\"}},[_vm._v(\" ＠\"+_vm._s(tweet.User.account))]),_c('span',{staticClass:\"user-link-time\"},[_vm._v(\"．\"+_vm._s(_vm._f(\"fromNow\")(tweet.createdAt)))])])])],1),_c('router-link',{attrs:{\"to\":{ name: 'Reply', params: { id: tweet.TweetId } }}},[_c('div',{staticClass:\"onetweet-txt\"},[_vm._v(\" \"+_vm._s(tweet.description)+\" \")])]),_c('div',{staticClass:\"onetweet-footer\"},[_c('div',{staticClass:\"chat\"},[_c('div',{staticClass:\"onetweet-footer-icon\"},[_c('img',{staticClass:\"chat-icon\",attrs:{\"src\":require(\"../assets/pic/chat.png\"),\"alt\":\"\"},on:{\"click\":function($event){return _vm.clickChatBtn(tweet.TweetId)}}})]),_c('span',{staticClass:\"footer-amount\"},[_vm._v(_vm._s(tweet.RepliesCount))])]),_c('div',{staticClass:\"heart\"},[_c('div',{staticClass:\"onetweet-footer-icon\"},[(tweet.isLiked)?_c('button',{attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.removeLike(tweet)}}},[_c('img',{attrs:{\"src\":require(\"../assets/pic/icon_like_fill.png\"),\"alt\":\"heart-icon\"}})]):_c('button',{attrs:{\"disabled\":_vm.isProcessing},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addLike(tweet)}}},[_c('img',{attrs:{\"src\":require(\"../assets/pic/heart.png\"),\"alt\":\"heart-icon\"}})])]),_c('span',{staticClass:\"footer-amount\"},[_vm._v(_vm._s(tweet.LikesCount))])])])],1)])}),_c('ReplyModal',{attrs:{\"ReplyModalSwitch\":_vm.ReplyModal,\"tweet\":_vm.tweet},on:{\"after-click-background\":_vm.afterClickClose,\"after-click-close\":_vm.afterClickClose,\"after-tweetReply-post\":_vm.afterTweetReplyPost}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"tweets scrollbar\" ref=\"chat\">\n    <div v-for=\"tweet in allTweets\" :key=\"tweet.TweetId\" class=\"onetweet\">\n      <div class=\"onetweet-user-icon-wrapper\">\n        <router-link :to=\"{ name: 'user', params: { id: tweet.User.id } }\">\n          <img class=\"user-icon\" :src=\"tweet.User.avatar\" alt=\"\" />\n        </router-link>\n      </div>\n      <div class=\"onetweet-txt-wrapper\">\n        <div class=\"onetweet-txt-header\">\n          <router-link :to=\"{ name: 'Reply', params: { id: tweet.TweetId } }\">\n            <span class=\"user-title\">{{ tweet.User.name }}</span>\n            <span class=\"user-info\">\n              <a href=\"#\" class=\"user-link\"> ＠{{ tweet.User.account }}</a>\n              <span class=\"user-link-time\"\n                >．{{ tweet.createdAt | fromNow }}</span\n              >\n            </span>\n          </router-link>\n        </div>\n        <router-link :to=\"{ name: 'Reply', params: { id: tweet.TweetId } }\">\n          <div class=\"onetweet-txt\">\n            {{ tweet.description }}\n          </div>\n        </router-link>\n        <div class=\"onetweet-footer\">\n          <div class=\"chat\">\n            <div class=\"onetweet-footer-icon\">\n              <img\n                @click=\"clickChatBtn(tweet.TweetId)\"\n                class=\"chat-icon\"\n                src=\"../assets/pic/chat.png\"\n                alt=\"\"\n              />\n            </div>\n            <span class=\"footer-amount\">{{ tweet.RepliesCount }}</span>\n          </div>\n          <div class=\"heart\">\n            <div class=\"onetweet-footer-icon\">\n              <button\n                v-if=\"tweet.isLiked\"\n                @click.stop.prevent=\"removeLike(tweet)\"\n                :disabled=\"isProcessing\"\n              >\n                <img src=\"../assets/pic/icon_like_fill.png\" alt=\"heart-icon\" />\n              </button>\n              <button\n                v-else\n                @click.stop.prevent=\"addLike(tweet)\"\n                :disabled=\"isProcessing\"\n              >\n                <img src=\"../assets/pic/heart.png\" alt=\"heart-icon\" />\n              </button>\n            </div>\n            <span class=\"footer-amount\">{{ tweet.LikesCount }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <ReplyModal\n      :ReplyModalSwitch=\"ReplyModal\"\n      :tweet=\"tweet\"\n      @after-click-background=\"afterClickClose\"\n      @after-click-close=\"afterClickClose\"\n      @after-tweetReply-post=\"afterTweetReplyPost\"\n    />\n  </div>\n</template>\n<script>\nimport ReplyModal from \"./../components/ReplyModal\";\nimport { fromNowFilter } from \"./../utils/mixins\";\nimport { Toast } from \"./../utils/helpers\";\nimport tweetAPI from \"../apis/tweet\";\n\nexport default {\n  name: \"MainTweets\",\n  mixins: [fromNowFilter],\n  components: {\n    ReplyModal,\n  },\n  props: {\n    allTweets: {\n      type: Array,\n      require: true,\n    },\n  },\n  data() {\n    return {\n      ReplyModal: false,\n      tweet: {\n        User: {\n          avatar: \"\",\n        },\n      },\n      isProcessing: false,\n    };\n  },\n  methods: {\n    clickChatBtn(tweetId) {\n      this.ReplyModal = true;\n      this.tweet = this.allTweets.find((item) => item.TweetId === tweetId);\n      // console.log(\"clickChatBtn\", this.tweet);\n    },\n    afterClickClose() {\n      this.ReplyModal = false;\n    },\n    afterTweetReplyPost() {\n      this.ReplyModal = false;\n      this.$emit(\"after-tweetReply-post\");\n    },\n    async addLike(tweet) {\n      // console.log(\"tweet\", tweet);\n      try {\n        this.isProcessing = true;\n        const tweetId = tweet.TweetId;\n        const { data } = await tweetAPI.addLike({ tweetId });\n        // console.log(\"add data\", data);\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n\n        tweet.LikesCount += 1;\n        tweet.isLiked = true;\n        this.isProcessing = false;\n      } catch (error) {\n        this.isProcessing = false;\n        // console.log(error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法喜歡,請稍後在試\",\n        });\n      }\n    },\n    async removeLike(tweet) {\n      // console.log(\"tweet\", tweet);\n      try {\n        this.isProcessing = true;\n        const tweetId = tweet.TweetId;\n        const response = await tweetAPI.removeLike({ tweetId });\n        // console.log(\"delete reponse\", response);\n        const { data } = response;\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n        tweet.isLiked = false;\n        tweet.LikesCount -= 1;\n        this.isProcessing = false;\n      } catch (error) {\n        this.isProcessing = false;\n        // console.log(error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取消喜歡,請稍後在試\",\n        });\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import \"./../assets/scss/maintweets.scss\";\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTweets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainTweets.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainTweets.vue?vue&type=template&id=166e2e48&scoped=true&\"\nimport script from \"./MainTweets.vue?vue&type=script&lang=js&\"\nexport * from \"./MainTweets.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MainTweets.vue?vue&type=style&index=0&id=166e2e48&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"166e2e48\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"main\">\n    <div class=\"main-container\">\n      <Menu @after-tweet-post=\"afterTweetPost\" />\n      <main class=\"content\">\n        <div class=\"content-post\">\n          <div class=\"content-header\">\n            <span class=\"title\">首頁</span>\n          </div>\n          <MainTweetPost @after-tweet-post=\"afterTweetPost\" />\n        </div>\n        <Spinner v-if=\"isLoading\" />\n\n        <MainTweets\n          v-else\n          :allTweets=\"allTweets\"\n          @after-tweetReply-post=\"afterTweetPost\"\n        />\n        <!-- @after-click-chat-btn=\"openReplyModal\" -->\n      </main>\n      <Popular />\n    </div>\n  </div>\n</template>\n<script>\nimport Menu from \"./../components/Menu\";\nimport Popular from \"./../components/Popular\";\nimport MainTweetPost from \"./../components/MainTweetPost\";\nimport MainTweets from \"./../components/MainTweets\";\nimport Spinner from \"./../components/Spinner\";\nimport { Toast } from \"./../utils/helpers\";\nimport getTweetsAPI from \"./../apis/tweet\";\n\nexport default {\n  namd: \"main\",\n  components: {\n    Menu,\n    Popular,\n    MainTweetPost,\n    MainTweets,\n    Spinner,\n    // ReplyModal,\n  },\n  data() {\n    return {\n      isLoading: true,\n      allTweets: [],\n      tweet: {},\n    };\n  },\n  created() {\n    this.fetchTweets();\n  },\n  methods: {\n    async fetchTweets() {\n      try {\n        const response = await getTweetsAPI.getTweets();\n        const { data } = response;\n        this.allTweets = data;\n        this.isLoading = false;\n      } catch {\n        this.isLoading = false;\n        Toast.fire({\n          icon: \"warning\",\n          title: \"tweets錯誤唷\",\n        });\n      }\n    },\n    afterTweetPost() {\n      this.fetchTweets();\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.main-container {\n  max-width: 1440px;\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  margin: auto;\n  font-family: \"Noto Sans TC\";\n}\n\n.content {\n  height: 100vh;\n  width: 600px;\n}\n\n.content-post {\n  height: 175px;\n  width: 100%;\n  border-bottom: 10px solid $tweetListBg;\n}\n\n.content-header {\n  height: 55px;\n  border: 1px solid $tweetListBg;\n}\n\n.title {\n  font-size: 18px;\n  line-height: 55px;\n  font-weight: 700;\n  padding-left: 15px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=aa0b3716&scoped=true&\"\nimport script from \"./Main.vue?vue&type=script&lang=js&\"\nexport * from \"./Main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&id=aa0b3716&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aa0b3716\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&id=aa0b3716&lang=scss&scoped=true&\""],"sourceRoot":""}